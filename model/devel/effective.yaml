--- 
logical: 
  activities: 
    heading: 
      abstract: {domain: String}
      card_path: {domain: String, mandatory: false}
      name: {domain: String}
      id: {domain: String}
    constraints: 
      pk_activities: {type: :primary_key, attributes: [id]}
  activity_responsabilities: 
    heading: 
      people: {domain: Integer}
      kind: {domain: String}
      order: {domain: Integer}
      activity: {domain: String}
    constraints: 
      actres_which_people: {type: :foreign_key, attributes: [people], references: people}
      pk_activity_responsabilities: {type: :primary_key, attributes: [activity, people]}
      astres_which_activity: {type: :foreign_key, attributes: [activity], references: activities}
  event_registrations: 
    heading: 
      people: {domain: Integer}
      event: {domain: String}
    constraints: 
      evtres_which_people: {type: :foreign_key, attributes: [people], references: people}
      evtres_which_event: {type: :foreign_key, attributes: [event], references: events}
      pk_event_registrations: {type: :primary_key, attributes: [people, event]}
  event_responsabilities: 
    heading: 
      people: {domain: Integer}
      kind: {domain: String}
      order: {domain: Integer, default: 1}
      event: {domain: String}
    constraints: 
      evtres_which_people: {type: :foreign_key, attributes: [people], references: people}
      evtres_which_event: {type: :foreign_key, attributes: [event], references: events}
      pk_event_responsabilities: {type: :primary_key, attributes: [event, people]}
  events: 
    heading: 
      formal_location: {domain: String, mandatory: false}
      start_time: {domain: Time}
      location: {domain: String, mandatory: false}
      end_time: {domain: Time}
      activity: {domain: String}
      abstract: {domain: String}
      nb_places: {domain: Integer, mandatory: false}
      card_path: {domain: String, mandatory: false}
      name: {domain: String}
      form_url: {domain: String, mandatory: false}
      id: {domain: String}
    constraints: 
      pk_events: {type: :primary_key, attributes: [id]}
      event_which_activity: {type: :foreign_key, attributes: [activity], references: activities}
  people: 
    heading: 
      adminlevel: {domain: Integer, default: -1}
      first_name: {domain: String, mandatory: false}
      rss_feed: {domain: String, mandatory: false}
      subscription_time: {domain: Time, mandatory: false}
      password: {domain: String, mandatory: false}
      activation_key: {domain: String, mandatory: false}
      newsletter: {domain: SByC::TypeSystem::Ruby::Boolean, mandatory: false}
      mail: {domain: String}
      last_name: {domain: String, mandatory: false}
      id: {domain: Integer}
      occupation: {domain: String, mandatory: false}
      rss_status: {domain: String, mandatory: false}
    constraints: 
      pk_people: {type: :primary_key, attributes: [id]}
      uniq_people_activation: {type: :candidate_key, attributes: [activation_key]}
      ak_people_mail: {type: :candidate_key, attributes: [mail]}
  webr_allregistered: SELECT id, mail, last_name, first_name, occupation FROM people ORDER BY id ASC
  webr_event_participants: SELECT r.event, p.id, p.mail, p.last_name, p.first_name, p.occupation FROM people as p JOIN event_registrations as r ON p.id = r.people ORDER BY id ASC
  webr_newsletter: SELECT id, mail, last_name, first_name, occupation FROM people WHERE newsletter = true ORDER BY id ASC
  webr_past_events: SELECT * FROM events WHERE current_timestamp > end_time ORDER BY start_time DESC
  webr_planned_events: SELECT * FROM events WHERE end_time > current_timestamp ORDER BY start_time ASC
--- 
physical: 
  indexes: {}

